<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
<p>
    <a href="{{ url_for('chat') }}">ðŸ’¬ Go to AI Chat</a>
</p>
    <script>
        // Drag & Drop support
        function allowDrop(ev) {
            ev.preventDefault();
        }
        function dropHandler(ev) {
            ev.preventDefault();
            var files = ev.dataTransfer.files;
            document.getElementById("fileInput").files = files;
        }
    </script>
</head>
<body>
    <h1>Admin Dashboard</h1>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li>{{ category|capitalize }}: {{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <h2>Upload Files</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="file" multiple 
               accept=".txt,.pdf,.doc,.docx,.xls,.xlsx" required>
        <button type="submit">Upload</button>
    </form>

    <div ondrop="dropHandler(event)" ondragover="allowDrop(event)" 
         style="border:2px dashed black; padding:20px; margin-top:10px;">
        Drag and drop files here
    </div>

    <h2>Uploaded Files ({{ count }})</h2>
    {% if files %}
        <ul>
        {% for file in files %}
            <li>{{ file }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No files uploaded yet.</p>
    {% endif %}

    <p><a href="{{ url_for('logout') }}">Logout</a></p>
</body>
</html>
